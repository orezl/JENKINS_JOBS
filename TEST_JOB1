pipeline {
	agent {label 'CentOS8'}

   stages {
   
   stage('Load Workspace') {
			 steps {

	 git branch: 'DevOps', credentialsId: 'b1eeb4a9-3f56-4e31-bbd1-e480ef147e9b', url: 'https://github.com/orezl/DevOpsTest.git'
			}
         }

      stage('Build') {
         steps {

             sh "mvn clean package"
         }

         post {
            success {
               
               archiveArtifacts 'target/*.war'
            }
         }
      }
	  
	     stage('Deploy to Tomcat') {
			 steps {

	        sh "curl -v -u admin:admin -T /home/centos/Jenkins/slave-agent/workspace/TEST_1/target/wwp-1.0.0.war 'http://192.168.0.20:8080/manager/text/deploy?path=/wwp-1.0.0&update=true'"
			}
         }
   }
}
