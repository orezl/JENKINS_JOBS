pipeline {
	agent CentOS8
	
	/*
	environment {
        mvnhome = tool 'Maven_Home'
        mvncmd = "${mvnhome}/bin/mvn" 
        JAVA_HOME= C:\Program Files\Java\jdk-14.0.1
	
    }
	*/
   stages {
   
   stage('Load Workspace') {
			 steps {
	/*		        bat "echo ${mvnhome}"
             bat "echo ${mvncmd}"
              bat "echo %JAVA_HOME%"
               bat "echo %MAVEN_HOME%"
          */
	  git credentialsId: '407d352c-b625-467d-b35a-06ca01ed3e84', url: 'https://github.com/orezl/practice.git'
			}
         }

      stage('Build') {
         steps {
           /*  def mvnhome = tool 'Maven_Home'
             def mvncmd = "${mvnhome}bin/mvn"
             bat "echo ${mvnhome}"
             bat "echo ${mvncmd}"
            */ 
            // To run Maven on a Windows agent, use
             sh "mvn -Dmaven.test.failure.ignore=true clean package"
         }

         post {
            // If Maven was able to run the tests, even if some of the test
            // failed, record the test results and archive the jar file.
            success {
               junit '**/target/surefire-reports/TEST-*.xml'
               archiveArtifacts 'target/*.jar'
            }
         }
      }
   }
}
